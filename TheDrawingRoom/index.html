<!DOCTYPE HTML> 
<html lang="en-US"> 
<head> 
  <title>The Drawing Room</title> 
  <meta charset="UTF-8"> 
  <meta name="viewport" content="width=1274, user-scalable=no"> 
  <link rel="stylesheet" href="style.css"> 
</head> 
<body class="list"> 
  <header class="caption"> 
    <h1>The Drawing Room experiment</h1> 
    <p>Multiplayer, social drawing application using html5, node.js, and maybe even google+ hangout.</p>
    <p>by <a href="http://www.twitter.com/jtubert">@jtubert</a></p>
  </header>

  <style> 
    #bam a {border:none;}
  </style>
  <div class="slide" id="goal"><div> 
    <section> 
      <header> 
        <h2>The Drawing Room experiment</h2> 
      </header> 
      <blockquote cite=""> 
        <p>Goal: Create a multiplayer social realtime drawing room using the latest technologies.</p> 
      </blockquote>
    </section> 
  </div></div>
  
  <div class="slide" id="technologies"><div> 
    <section> 
      <header> 
        <h2>Technologies:</h2> 
      </header> 
      <ul> 
        <li>Front-end: HTML5/JS</li> 
        <li>Back-end: Node.js</li> 
        <li>Repository: GIT</li> 
		<li>Hosting: Joyent</li> 
      </ul> 
    </section> 
  </div></div>

  <div class="slide" id="setup"><div> 
    <section> 
      <header> 
        <h2>Setup:</h2> 
      </header> 
	  <ul> 
        <li>Install node.js (mac): https://sites.google.com/site/nodejsmacosx/</li> 
        <li>Install socketio (using node packet manager): <b>npm install socket.io</b></li> 
        <li>Install express: <b>npm install express</b></li> 
		<li>Install gzippo: <b>npm install gzippo</b></li> 
      </ul>
    </section> 
  </div></div>

  <div class="slide" id="server"><div> 
    <section> 
      <header> 
        <h2>server.js:</h2> 
      </header> 
	  <ul> 
		<li>Import necessary libs</li> 
        <li>Handle static files</li> 
        <li>Handle socket connections</li>
      </ul>
    </section> 
  </div></div>

  
  <div class="slide" id="import"><div> 
    <section> 
      <header> 
        <h2>Imports...</h2> 
      </header> 
      <pre> 
        <code>var app = require('express').createServer(),</code> 
        <code>io = require('socket.io').listen(app), </code> 
        <code>fs = require('fs'), //file system</code> 
        <code>gzippo = require('gzippo');</code> 
      </pre> 
    </section> 
  </div></div> 

  <div class="slide" id="static"><div> 
    <section> 
      <header> 
        <h2>Handling static files</h2> 
      </header> 
      <pre> 
        <code>app.use(gzippo.staticGzip(__dirname + '/static'));</code>
      </pre> 
    </section> 
  </div></div>

  <style> 
    #socket code {font-size:19px;}
  </style>

  <div class="slide" id="socket"><div> 
    <section> 
      <header> 
        <h2>Socket Connections:</h2> 
      </header> 
      <pre> 
        <code>io.sockets.on('connection', function (socket) {</code>
		<code>  socket.on('down', function (data) {</code>
		<code>    socket.get('nickname', function (err, name) {</code>
		<code>      socket.broadcast.emit('down', { draw: data,nickname:name,socketID:socket.id });</code>
		<code>    });</code>
		<code>  });</code>
		<code>});</code>
      </pre> 
    </section> 
  </div></div>


  <div class="slide" id="html"><div> 
    <section> 
      <header> 
        <h2>HTML file:</h2> 
      </header> 
      <pre> 
        <code>&lt;script src="/socket.io/socket.io.js"&gt;&lt;/script&gt;</code>
		<code>&lt;script type="text/javascript" src="/js/init.js"&gt;&lt;/script&gt;</code>
		<code>&lt;body&gt;</code>
		<code>   &lt;canvas class="canvas" id="drawLayer" style='z-index:1'&gt;</canvas></code>
		<code>&lt;/body&gt;</code>
      </pre> 
    </section> 
  </div></div>


  <style> 
    #jsfile code {font-size:14px;}
  </style>
  <div class="slide" id="jsfile"><div> 
    <section> 
      <header> 
        <h2>JS file:</h2> 
      </header>
 	  //Create socket object
      <pre> 
        <code>socket = io.connect('http://localhost:8080/');</code>
	  </pre> 
	//for each message I want to send...
      <pre> 
        <code>socket.emit(name, object);</code>
	  </pre>
	
	//for each message I receive...
      <pre> 
        <code>socket.on('down', function (data) {</code>
		<code>  //handle received data</code>
		<code>});</code>
	  </pre>
 </section> 
  </div></div>

  <style> 
    #showCode h2 {font-size:110px;}
  </style> 
  <div class="slide shout" id="showCode"><div> 
    <section> 
      <header> 
        <h2><a href="http://thedrawingroom.no.de">DEMO</a></h2> 
      </header> 
    </section> 
  </div></div> 

  <div class="slide" id="resources"><div> 
    <section> 
      <header> 
        <h2>Resources:</h2> 
      </header> 
      <ul> 
        <li><a href="http://nodejs.org/ ">nodejs homepage</a></li> 
        <li><a href="https://sites.google.com/site/nodejsmacosx/">Node js mac installer</a></li> 
        <li><a href="http://www.nodebeginner.org/">node tutorial</a></li>
		<li><a href="http://socket.io/#how-to-use">Socket IO</a></li>
		<li><a href="http://expressjs.com/">Express</a></li> 
		<li><a href="https://github.com/tomgallacher/gzippo">GZippo</a></li> 
		<li><a href="http://no.de">Joyent (node hosting)</a></li> 
		<li><a href="https://www.dotcloud.com ">DotCloud (node hosting)</a></li> 
	  </ul> 
    </section> 
  </div></div> 

  <div class="slide" id="porting"><div> 
    <section> 
      <header> 
        <h2>How do I port this into Google+ Hangout?</h2> 
      </header> 
      <blockquote cite=""> 
        <p>Now that I have this running on node.js I want to replace node.js with hangout API. Or maybe I can keep node but take advantage of hangout API...</p> 
      </blockquote>
    </section> 
  </div></div>

  <div class="slide" id="hangout"><div> 
    <section> 
      <header> 
        <h2>Steps for putting app on hangout:</h2> 
      </header> 
      <ul> 
        <li>Create gadget xml</li> 
		<li>Replace node.js calls with hangout API data calls</li> 
		<li>Enable Hangout API on console</li> 
		<li>Add more team members if necessary</li> 
		<li>Enter gadget xml url into hangout tab</li> 
	  </ul> 
    </section> 
  </div></div>

  <style> 
    #gadget code {font-size:13px;}
  </style>
  <div class="slide" id="gadget"><div> 
    <section> 
      <header> 
        <h2>Gadget XML:</h2> 
      </header> 
      <pre> 
        <code>&lt;Module&gt;</code>
		<code>  &lt;ModulePrefs title="hangout test"&gt;</code>
		<code>    &lt;Require feature="rpc"/&gt;</code>
		<code>    &lt;Require feature="views"/&gt;</code>
		<code>  &lt;/ModulePrefs&gt;</code>
		<code>  &lt;Content type="html"&gt;</code>
		<code>  &lt;![CDATA[</code>
	    <code>  &lt;script src="//hangoutsapi.appspot.com/static/hangout.js"&gt;&lt;/script></code>
		<code>  <b><font color="red">{YOUR CODE}</font></b></code>
		<code>  ]]&gt;</code>
		<code>  &lt;/Content&gt;</code>
		<code>&lt;/Module&gt;</code>
	  </pre>
    </section> 
  </div></div>

  <style> 
    #replaceNode code {font-size:10px;}
  </style>
  <div class="slide" id="replaceNode"><div> 
    <section> 
      <header> 
        <h2>Replacing node with hangout API:</h2> 
      </header> 
      
      <pre> 
        <code>//sending data...</code>
		<code>gapi.hangout.data.submitDelta({name:object});</code>
		<code>//receiving data...</code>
		<code>gapi.hangout.data.addStateChangeListener(stateUpdated);</code>
		<code> </code>
		<code>function stateUpdated(delta, metadata) {</code>
		<code>  var remoteDisplayName = gapi.hangout.data.getState()['displayName'];</code>
		<code>  var remoteParticipantId = gapi.hangout.data.getState()['participantId'];</code>
		<code>}</code>
		<code>//getting users</code>
		<code>var participantId = gapi.hangout.getParticipantId();</code>
		<code>var participant = gapi.hangout.getParticipantById(participantId);</code>
		<code>var displayName = participant.displayName;</code>
		<code>var imageURL = participant.image.url</code>
	  </pre>
    </section> 
  </div></div>
  
  <style> 
  #enable h2, #team h2, #hangout2 h2 {position:relative;left:-100px;bottom:70px;}
  </style>
  <div class="slide bg" id="enable"><div> 
    <section>
	 	<header> 
	    	<h2>ENABLE HANGOUT</h2> 
	    </header>
		<img src="enable.png">
    </section> 
  </div></div>

  <div class="slide bg" id="team"><div> 
    <section>
	 	<header> 
	    	<h2>ADD TEAM MEMBERS</h2> 
	    </header>
		<img src="team.png">
    </section> 
  </div></div>

  <div class="slide bg" id="hangout2"><div> 
    <section>
	 	<header> 
	    	<h2>ENTER GADGET URL</h2> 
	    </header>
		<img src="hangout.png">
    </section> 
  </div></div>

  <style> 
    #showCode2 h2 {font-size:110px;}
  </style> 
  <div class="slide shout" id="showCode2"><div> 
    <section> 
      <header> 
        <h2>DEMO</h2> 
      </header> 
    </section> 
  </div></div>

  <div class="progress"><div></div></div> 
  <script src="script.js"></script> 
</body> 
</html>